<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ê—Ä—Ö–∏–≤ v1.3 PRO</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <style>
        :root {
            --primary: #007bff;
            --bg: #f0f2f5;
            --card-bg: #ffffff;
            --text: #333;
            --neon: transparent;
        }

        body.ruslan-mode {
            --bg: #0a0a0a;
            --card-bg: #1a1a1a;
            --text: #00ff41;
            --primary: #00ff41;
            --neon: 0 0 10px #00ff41;
        }

        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); display: flex; flex-direction: column; align-items: center; padding: 20px; color: var(--text); transition: all 0.5s ease; }
        .container { width: 100%; max-width: 700px; background: var(--card-bg); padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); border: 1px solid var(--neon); }

        .stats-header { text-align: center; font-size: 0.9em; color: #888; margin-bottom: 15px; font-weight: bold; background: rgba(0,0,0,0.03); padding: 10px; border-radius: 10px; }
        .search-container { margin-bottom: 20px; width: 100%; }
        #search-input { width: 100%; padding: 12px 15px; border: 2px solid #ddd; border-radius: 10px; background: var(--card-bg); color: var(--text); font-size: 16px; outline: none; transition: 0.3s; box-sizing: border-box; }

        .main-nav { display: flex; justify-content: center; gap: 10px; margin-bottom: 25px; background: rgba(0,0,0,0.05); padding: 8px; border-radius: 12px; }
        .main-btn { padding: 10px 25px; cursor: pointer; border: none; background: none; font-weight: bold; border-radius: 8px; color: var(--text); }
        .main-btn.active { background: var(--primary); color: white; box-shadow: var(--neon); }

        .sub-tabs { display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px; overflow-x: auto; }
        .tab-btn { padding: 6px 12px; cursor: pointer; border: none; background: rgba(0,0,0,0.05); border-radius: 6px; color: var(--text); white-space: nowrap; }
        .tab-btn.active { background: #6c757d; color: white; }

        .page, .content-section { display: none; }
        .page.active, .content-section.active { display: block; }

        .card { background: var(--card-bg); border: 1px solid rgba(0,0,0,0.1); padding: 20px; margin-bottom: 15px; border-radius: 12px; animation: slideUp 0.5s ease forwards; opacity: 0; position: relative; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .quote-text { font-style: italic; font-size: 1.1em; border-left: 4px solid var(--primary); padding-left: 15px; display: block; margin-bottom: 10px; }
        .author { text-align: right; display: block; font-weight: bold; }

        .event-header { display: flex; justify-content: space-between; align-items: center; }
        .details-text { display: none; margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.03); border-radius: 8px; border: 1px dashed var(--primary); font-size: 0.95em; line-height: 1.5; }
        .time-passed { font-size: 0.85em; color: #d9534f; margin-top: 8px; font-weight: bold; display: block; }

        /* –°–ò–°–¢–ï–ú–ê –õ–ê–ô–ö–û–í */
        .like-section { display: flex; align-items: center; gap: 8px; margin-top: 15px; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 10px; }
        .like-btn { cursor: pointer; font-size: 1.2em; user-select: none; transition: transform 0.2s; filter: grayscale(100%); opacity: 0.7; }
        .like-btn:hover { transform: scale(1.1); }
        .like-btn.liked { filter: grayscale(0%); opacity: 1; }
        .like-count { font-weight: bold; font-size: 1em; color: var(--text); }

        .achievement { position: fixed; top: 20px; right: -300px; background: #333; color: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.5s; z-index: 1000; border-left: 5px solid gold; }
        .achievement.show { right: 20px; }

        #terminal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #000; color: #00ff41; padding: 20px; border-radius: 10px; width: 300px; display: none; z-index: 2000; box-shadow: 0 0 50px #000; }
        #terminal input { background: transparent; border: none; color: #00ff41; outline: none; width: 100%; font-family: monospace; border-bottom: 1px solid #00ff41; }

        .action-btn { background: var(--primary); border: none; padding: 8px 15px; border-radius: 5px; color: white; cursor: pointer; margin-top: 10px; font-size: 0.85em; transition: 0.2s; }
        .share-btn { background: rgba(0,0,0,0.1); color: var(--text); margin-left: 5px; }
        .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 10px 20px; border-radius: 20px; display: none; z-index: 3000; }
    </style>
</head>
<body id="main-body">

<div id="copy-toast" class="toast">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä!</div>
<div id="achievement-box" class="achievement">
    <strong id="ach-title">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!</strong><br><span id="ach-desc">–¢–µ–∫—Å—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</span>
</div>
<div id="terminal">
    <div>SYSTEM LOGIN: ACCESS REQUIRED</div>
    <input type="text" id="terminal-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥...">
</div>

<div class="container">
    <div class="stats-header" id="live-stats">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</div>
    <div class="search-container"><input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ —Ü–∏—Ç–∞—Ç –∏–ª–∏ —Å–æ–±—ã—Ç–∏–π..." onkeyup="filterQuotes()"></div>

    <div class="main-nav">
        <button class="main-btn active" onclick="showPage('quotes-page')">–¶–∏—Ç–∞—Ç—ã</button>
        <button class="main-btn" onclick="showPage('events-page')">–°–æ–±—ã—Ç–∏—è</button>
    </div>

    <div id="quotes-page" class="page active">
        <div class="sub-tabs">
            <button class="tab-btn active" onclick="openSubTab('ruslan', 'quotes')">–û –†—É—Å–ª–∞–Ω–µ</button>
            <button class="tab-btn" onclick="openSubTab('sergo', 'quotes')">–°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</button>
            <button class="tab-btn" onclick="openSubTab('terminator', 'quotes')">–ê–Ω–¥—Ä–µ–π –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä</button>
            <button class="tab-btn" onclick="openSubTab('all', 'quotes')">–í—Å–µ</button>
        </div>

        <div id="ruslan-quotes" class="content-section active">
            <div class="card" data-quote-id="quote_ruslan_3_10">
                <span class="quote-text">¬´3 —Ü–µ–ª—ã—Ö –†—É—Å–ª–∞–Ω –¥–µ—Å—è—Ç—ã—Ö¬ª</span>
                <span class="author">‚Äî –ê—Ä—Ç–µ–º –í–µ–ª–∏–∫–∏–π</span>
                <div class="like-section">
                    <span class="like-btn" onclick="toggleLike('quote_ruslan_3_10')">‚ù§Ô∏è</span>
                    <span class="like-count">0</span>
                    <button class="action-btn share-btn" style="margin-top:0; margin-left:auto;" onclick="copyQuote(this)">üìã</button>
                </div>
            </div>
            <div id="secret-quote" style="display: none;">
                <div class="card" style="border: 2px dashed #d9534f;" data-quote-id="quote_secret_masulya">
                    <span class="quote-text">¬´–ß–µ –∑–∞ –º–∞—Å—é–ª—è –Ω–∞ –º–Ω–µ¬ª</span>
                    <span class="author">‚Äî –ê—Ä—Ç–µ–º –í–µ–ª–∏–∫–∏–π</span>
                    <div style="font-size: 0.8em; color: #d9534f; margin-top:10px;">–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –ó–∞–±—ã–ª–∏ –ø—Ä–æ –Ω–µ–µ</div>
                    <div class="like-section">
                        <span class="like-btn" onclick="toggleLike('quote_secret_masulya')">‚ù§Ô∏è</span>
                        <span class="like-count">0</span>
                        <button class="action-btn share-btn" style="margin-top:0; margin-left:auto;" onclick="copyQuote(this)">üìã</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="sergo-quotes" class="content-section">
            <div class="card" data-quote-id="quote_sergo_listen">
                <span class="quote-text">¬´–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ —Å–ª—É—à–∞–π—Ç–µ¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span>
                <div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_listen')">‚ù§Ô∏è</span><span class="like-count">0</span><button class="action-btn share-btn" style="margin-top:0; margin-left:auto;" onclick="copyQuote(this)">üìã</button></div>
            </div>
            <div class="card" data-quote-id="quote_sergo_kolya">
                <span class="quote-text">¬´–ö–æ–ª—è –≤—ã–π–¥–∏ –ö–æ–ª—è –≤—ã–π–¥–∏¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span>
                <div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_kolya')">‚ù§Ô∏è</span><span class="like-count">0</span><button class="action-btn share-btn" style="margin-top:0; margin-left:auto;" onclick="copyQuote(this)">üìã</button></div>
            </div>
            <div class="card" data-quote-id="quote_sergo_ukr">
                <span class="quote-text">¬´–£–∫—Ä–∞–∏–Ω—Ü—ã¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span>
                <div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_ukr')">‚ù§Ô∏è</span><span class="like-count">0</span><button class="action-btn share-btn" style="margin-top:0; margin-left:auto;" onclick="copyQuote(this)">üìã</button></div>
            </div>
            <div class="card" data-quote-id="quote_sergo_svolochi">
                <span class="quote-text">¬´–°–≤–æ–ª–æ—á–∏¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span>
                <div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_svolochi')">‚ù§Ô∏è</span><span class="like-count">0</span><button class="action-btn share-btn" style="margin-top:0; margin-left:auto;" onclick="copyQuote(this)">üìã</button></div>
            </div>
        </div>

        <div id="terminator-quotes" class="content-section">
            <p style="text-align: center; opacity: 0.5;">–¶–∏—Ç–∞—Ç –ø–æ–∫–∞ –Ω–µ—Ç.</p>
        </div>

        <div id="all-quotes" class="content-section">
            <div class="card" data-quote-id="quote_vova_tank">
                <span class="quote-text">¬´–¢–∞–Ω–∫ –≤—ã–≥–ª—è–¥—ã–≤–∞–µ—Ç¬ª</span><span class="author">‚Äî –í–æ–≤–∞ –≤–µ–ª. –ê—Ä—Ç–µ–º –≤–µ–ª.</span>
                <div class="like-section"><span class="like-btn" onclick="toggleLike('quote_vova_tank')">‚ù§Ô∏è</span><span class="like-count">0</span><button class="action-btn share-btn" style="margin-top:0; margin-left:auto;" onclick="copyQuote(this)">üìã</button></div>
            </div>
            <div class="card" data-quote-id="quote_ruslan_3_10"><span class="quote-text">¬´3 —Ü–µ–ª—ã—Ö –†—É—Å–ª–∞–Ω –¥–µ—Å—è—Ç—ã—Ö¬ª</span><span class="author">‚Äî –ê—Ä—Ç–µ–º –í–µ–ª–∏–∫–∏–π</span><div class="like-section"><span class="like-btn" onclick="toggleLike('quote_ruslan_3_10')">‚ù§Ô∏è</span><span class="like-count">0</span></div></div>
            <div class="card" data-quote-id="quote_sergo_listen"><span class="quote-text">¬´–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ —Å–ª—É—à–∞–π—Ç–µ¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span><div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_listen')">‚ù§Ô∏è</span><span class="like-count">0</span></div></div>
            <div class="card" data-quote-id="quote_sergo_kolya"><span class="quote-text">¬´–ö–æ–ª—è –≤—ã–π–¥–∏ –ö–æ–ª—è –≤—ã–π–¥–∏¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span><div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_kolya')">‚ù§Ô∏è</span><span class="like-count">0</span></div></div>
            <div class="card" data-quote-id="quote_sergo_ukr"><span class="quote-text">¬´–£–∫—Ä–∞–∏–Ω—Ü—ã¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span><div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_ukr')">‚ù§Ô∏è</span><span class="like-count">0</span></div></div>
            <div class="card" data-quote-id="quote_sergo_svolochi"><span class="quote-text">¬´–°–≤–æ–ª–æ—á–∏¬ª</span><span class="author">‚Äî –°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</span><div class="like-section"><span class="like-btn" onclick="toggleLike('quote_sergo_svolochi')">‚ù§Ô∏è</span><span class="like-count">0</span></div></div>
        </div>
    </div>

    <div id="events-page" class="page">
        <div class="sub-tabs">
            <button class="tab-btn active" onclick="openSubTab('ruslan', 'events')">–û –†—É—Å–ª–∞–Ω–µ</button>
            <button class="tab-btn" onclick="openSubTab('sergo', 'events')">–°–µ—Ä–≥–æ –ú–µ—Ä–≥–æ</button>
            <button class="tab-btn" onclick="openSubTab('terminator', 'events')">–ê–Ω–¥—Ä–µ–π –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä</button>
            <button class="tab-btn" onclick="openSubTab('all', 'events')">–í—Å–µ</button>
        </div>

        <div id="ruslan-events" class="content-section active">
            <div class="card">
                <div class="event-header"><strong>–ü–∏—Å—Ç–æ–ª–µ—Ç –≤ –∫–æ–±—É—Ä—É</strong><small>??.01.26</small></div>
                <button class="action-btn" onclick="toggleDetails(this)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                <div class="details-text">–í –æ–¥–∏–Ω —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å –†—É—Å–ª–∞–Ω —Å–∏–¥–µ–ª –∏ –∫–æ–≥–¥–∞ —É—Å–ª—ã—à–∞–ª –∑–≤–æ–Ω–æ–∫ —Å—Ä–∞–∑—É —Å–ø—Ä—è—Ç–∞–ª —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –∫–∞—Ä–º–∞–Ω –∏ –ø–æ—Å–ª–µ –æ–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫ –ø–æ–¥ –∏–º–µ–Ω–µ–º –í–æ–≤–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥ –ø—Ä–∏–¥—É–º–∞–ª "–ü–∏—Å—Ç–æ–ª–µ—Ç –≤ –∫–æ–±—É—Ä—É". <br><strong>–ê–≤—Ç–æ—Ä: –í–æ–≤–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥</strong></div>
            </div>
        </div>

        <div id="sergo-events" class="content-section">
            <div class="card">
                <div class="event-header"><strong>–ê—Ä—Ç –æ–±—Å—Ç—Ä–µ–ª –°–µ—Ä–≥–æ –º–µ—Ä–≥–æ</strong><small>27.02.26 | 9:35</small></div>
                <span class="time-passed" data-date="2026-02-27T09:35:00">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–º–µ—Ä–∞...</span>
                <button class="action-btn" onclick="toggleDetails(this)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                <div class="details-text">–í 9:35 –±—ã–ª –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –∞—Ä—Ç –æ–±—Å—Ç—Ä–µ–ª –°–µ—Ä–≥–æ –º–µ—Ä–≥–æ. –ü–æ—Å—Ç—Ä–∞–¥–∞–ª 1 —á–µ–ª–æ–≤–µ–∫ (–°–µ—Ä–≥–æ –º–µ—Ä–≥–æ). –í –∫–∞—á–µ—Å—Ç–≤–µ —Å–Ω–∞—Ä—è–¥–æ–≤ –±—ã–ª–∞ –∫–æ–∂—É—Ä–∞ –æ—Ç –º–∞–Ω–¥–∞—Ä–∏–Ω–æ–≤.</div>
            </div>
        </div>

        <div id="terminator-events" class="content-section">
            <div class="card">
                <div class="event-header"><strong>–ü–æ—â–µ—á–∏–Ω–∞ –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä–∞</strong><small>??.??.??</small></div>
                <button class="action-btn" onclick="toggleDetails(this)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                <div class="details-text">??? –î–ï–ù–¨,–ú–ï–°–Ø–¶,–ì–û–î. –ê–Ω–¥—Ä–µ–π —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä –≤—Å—Ç–∞–ª —Å–æ —Å–≤–æ–µ–≥–æ —Å—Ç—É–ª–∞ –∏ –±—É–¥—É—á–∏ –∑–ª—ã–º –¥–∞–ª –ø–æ—â–µ—á–∏–Ω—É –°–∞–≤–µ–ª–∏—é –∏ –æ–Ω —É–¥–∞—Ä–∏–ª—Å—è –æ–± —Å—Ç–µ–Ω—É.</div>
            </div>
        </div>

        <div id="all-events" class="content-section">
            <div class="card"><strong>–ü–∏—Å—Ç–æ–ª–µ—Ç –≤ –∫–æ–±—É—Ä—É</strong> <button class="action-btn" onclick="toggleDetails(this)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button><div class="details-text">–í –æ–¥–∏–Ω —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å –†—É—Å–ª–∞–Ω —Å–∏–¥–µ–ª –∏...</div></div>
            <div class="card"><strong>–ê—Ä—Ç –æ–±—Å—Ç—Ä–µ–ª –°–µ—Ä–≥–æ –º–µ—Ä–≥–æ</strong><br><span class="time-passed" data-date="2026-02-27T09:35:00">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–º–µ—Ä–∞...</span><br><button class="action-btn" onclick="toggleDetails(this)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button><div class="details-text">–í 9:35 –±—ã–ª –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –∞—Ä—Ç –æ–±—Å—Ç—Ä–µ–ª –°–µ—Ä–≥–æ –º–µ—Ä–≥–æ...</div></div>
            <div class="card"><strong>–ü–æ—â–µ—á–∏–Ω–∞ –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä–∞</strong> <button class="action-btn" onclick="toggleDetails(this)">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button><div class="details-text">??? –î–ï–ù–¨,–ú–ï–°–Ø–¶,–ì–û–î...</div></div>
        </div>
    </div>
</div>

<script>
    // ==========================================
    // –ù–ê–°–¢–†–û–ô–ö–ê FIREBASE (–ë–ê–ó–ê –î–ê–ù–ù–´–• –î–õ–Ø –õ–ê–ô–ö–û–í)
    // ==========================================
    // –í–ù–ò–ú–ê–ù–ò–ï: –ó–∞–º–µ–Ω–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–≤–æ–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ Firebase, –∏–Ω–∞—á–µ –ª–∞–π–∫–∏ –Ω–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ!
    const firebaseConfig = {
        apiKey: "AIzaSyCAf9GfgjJSuIC3i-NZq6TH-E3OjYDj5ng",
        authDomain: "citata-edadd.firebaseapp.com",
        databaseURL: "https://citata-edadd-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "citata-edadd",
        storageBucket: "citata-edadd.firebasestorage.app",
        messagingSenderId: "779162308250",
        appId: "1:779162308250:web:ab62faa3b59169e5751923"
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –∫–ª—é—á–∏ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã)
    let database = null;
    try {
        firebase.initializeApp(firebaseConfig);
        database = firebase.database();
    } catch (e) {
        console.warn("Firebase –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –õ–∞–π–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ.");
    }

    // ==========================================
    // –õ–û–ì–ò–ö–ê –õ–ê–ô–ö–û–í (GLOBAL + LOCAL STORAGE)
    // ==========================================
    function toggleLike(quoteId) {
        const isLikedLocal = localStorage.getItem('liked_' + quoteId);

        if (database) {
            // –ï—Å–ª–∏ Firebase –ø–æ–¥–∫–ª—é—á–µ–Ω (–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ª–∞–π–∫–∏)
            const likeRef = database.ref('likes/' + quoteId);
            likeRef.transaction((currentCount) => {
                if (isLikedLocal) {
                    localStorage.removeItem('liked_' + quoteId);
                    return (currentCount || 1) - 1; // –£–±–∏—Ä–∞–µ–º –ª–∞–π–∫
                } else {
                    localStorage.setItem('liked_' + quoteId, 'true');
                    return (currentCount || 0) + 1; // –°—Ç–∞–≤–∏–º –ª–∞–π–∫
                }
            });
        } else {
            // –ó–∞–≥–ª—É—à–∫–∞, –µ—Å–ª–∏ Firebase –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ª–æ–∫–∞–ª—å–Ω–æ)
            let el = document.querySelector(`[data-quote-id="${quoteId}"] .like-count`);
            let count = parseInt(el.innerText) || 0;
            if (isLikedLocal) {
                localStorage.removeItem('liked_' + quoteId);
                updateAllDOM(quoteId, count - 1, false);
            } else {
                localStorage.setItem('liked_' + quoteId, 'true');
                updateAllDOM(quoteId, count + 1, true);
            }
        }
    }

    // –°–ª—É—à–∞—Ç–µ–ª—å Firebase –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    if (database) {
        database.ref('likes').on('value', (snapshot) => {
            const data = snapshot.val();
            if(!data) return;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ü–∏—Ç–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            document.querySelectorAll('.card[data-quote-id]').forEach(card => {
                const qId = card.getAttribute('data-quote-id');
                const isLiked = localStorage.getItem('liked_' + qId) !== null;
                const count = data[qId] || 0;
                
                const countEl = card.querySelector('.like-count');
                const btnEl = card.querySelector('.like-btn');
                
                if(countEl) countEl.innerText = count;
                if(btnEl) {
                    if(isLiked) btnEl.classList.add('liked');
                    else btnEl.classList.remove('liked');
                }
            });
        });
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM (–µ—Å–ª–∏ –±–µ–∑ –±–∞–∑—ã)
    function updateAllDOM(quoteId, count, isLiked) {
        document.querySelectorAll(`.card[data-quote-id="${quoteId}"]`).forEach(card => {
            card.querySelector('.like-count').innerText = count;
            if(isLiked) card.querySelector('.like-btn').classList.add('liked');
            else card.querySelector('.like-btn').classList.remove('liked');
        });
    }

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–∞–π–∫–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏)
    window.addEventListener('DOMContentLoaded', () => {
        if(!database) {
            document.querySelectorAll('.card[data-quote-id]').forEach(card => {
                const qId = card.getAttribute('data-quote-id');
                if(localStorage.getItem('liked_' + qId)) {
                    card.querySelector('.like-btn').classList.add('liked');
                }
            });
        }
    });


    // ==========================================
    // –°–¢–ê–†–´–ô –ö–û–î (–í–ö–õ–ê–î–ö–ò, –¢–ê–ô–ú–ï–†–´, –ü–ê–°–•–ê–õ–ö–ò)
    // ==========================================
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.main-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function openSubTab(category, type) {
        const parentPage = document.getElementById(type + '-page');
        parentPage.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        parentPage.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(category + '-' + type).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function filterQuotes() {
        let input = document.getElementById('search-input').value.toLowerCase();
        document.querySelectorAll('.card').forEach(card => {
            card.style.display = card.innerText.toLowerCase().includes(input) ? "block" : "none";
        });
    }

    function toggleDetails(btn) {
        const text = btn.parentElement.querySelector('.details-text');
        if(text) {
            text.style.display = (text.style.display === "block") ? "none" : "block";
            btn.innerText = (text.style.display === "block") ? "–°–∫—Ä—ã—Ç—å" : "–ü–æ–¥—Ä–æ–±–Ω–µ–µ";
        }
    }

    function copyQuote(btn) {
        const card = btn.closest('.card');
        const text = card.querySelector('.quote-text').innerText;
        const author = card.querySelector('.author').innerText;
        navigator.clipboard.writeText(`${text} ${author} (–∏–∑ –ê—Ä—Ö–∏–≤–∞)`);
        const toast = document.getElementById('copy-toast');
        toast.style.display = 'block';
        setTimeout(() => toast.style.display = 'none', 2000);
    }

    function showAchievement(title, desc) {
        const box = document.getElementById('achievement-box');
        document.getElementById('ach-title').innerText = title;
        document.getElementById('ach-desc').innerText = desc;
        box.classList.add('show');
        setTimeout(() => box.classList.remove('show'), 4000);
    }

    function updateStats() {
        // –°—á–∏—Ç–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã (–Ω–µ —Å—á–∏—Ç–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ –≤–∫–ª–∞–¥–∫–∏ "–í—Å–µ")
        let totalQuotes = document.querySelectorAll('#ruslan-quotes .card, #sergo-quotes .card, #terminator-quotes .card').length;
        let totalEvents = document.querySelectorAll('#all-events .card').length;
        document.getElementById('live-stats').innerText = `üìä –í—Å–µ–≥–æ —Ü–∏—Ç–∞—Ç: ${totalQuotes} | –°–æ–±—ã—Ç–∏–π: ${totalEvents}`;
    }

    function updateTimers() {
        const now = new Date();
        document.querySelectorAll('.time-passed').forEach(timer => {
            const eventDate = new Date(timer.getAttribute('data-date'));
            const diff = now - eventDate;
            if (diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((diff / 1000 / 60) % 60);
                const seconds = Math.floor((diff / 1000) % 60);
                timer.innerText = `‚è± –ü—Ä–æ—à–ª–æ: ${days} –¥–Ω. ${hours} —á. ${minutes} –º–∏–Ω. ${seconds} —Å–µ–∫.`;
            } else {
                timer.innerText = "‚è± –°–æ–±—ã—Ç–∏–µ –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª–æ";
            }
        });
    }

    updateStats();
    updateTimers();
    setInterval(updateTimers, 1000);

    let keys = "";
    window.addEventListener('keydown', (e) => {
        keys += e.key.toLowerCase();
        if (keys.endsWith("ruslan")) {
            document.body.classList.toggle('ruslan-mode');
            showAchievement("–¢—ë–º–Ω—ã–π —Ä—ã—Ü–∞—Ä—å", "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ä–µ–∂–∏–º RUSLAN");
            keys = "";
        }
        if (e.key === "~" || e.key === "—ë") {
            const term = document.getElementById('terminal');
            term.style.display = (term.style.display === "block") ? "none" : "block";
            document.getElementById('terminal-input').focus();
        }
    });

    document.getElementById('terminal-input').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            if (this.value.toLowerCase() === 'admin') {
                document.getElementById('secret-quote').style.display = 'block';
                showAchievement("–•–∞–∫–µ—Ä", "–£–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã");
                document.getElementById('terminal').style.display = 'none';
                updateStats(); 
            }
            this.value = "";
        }
    });
</script>

</body>
</html>
